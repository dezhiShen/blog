<html>

<head>
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <title>博客</title>
</head>

<body>
    <div id="app">
        <el-container>
            <el-aside>
                <div id="summary"></div>
            </el-aside>
            <el-main>
                <div id="content"></div>
            </el-main>
        </el-container>
        <div id="content"></div>
    </div>
</body>
<script>
    var vm = new Vue({
        el: "#app",
        name: "app",
        props: {},
        computed: {},
        data() {
            return {
                renderer: null
            }
        },
        methods: {
            init: function () {
                this.initRender()
                this.renderSummary()
            },
            initRender: function () {
                this.renderer = new marked.Renderer();
                this.renderer.link = function (href, title, text) {
                    return `<a href="#" onclick="()=>{renderContent('${href}')}">${text}</a>`
                }
            },
            renderSummary: function () {
                this.renderFromUrl("./SUMMARY.md", "#summary")
            },
            renderContent: function (url) {
                this.renderFromUrl(url, "#content")

            },
            renderFromUrl: function (url, node) {
                const that = this
                $.get(url, function (response, status, xhr) {
                    $(node).html(marked(response, { renderer: that.renderer }));
                });
            }
        },

        mounted: async function () {
            this.init()
        }
    });
</script>

</html>